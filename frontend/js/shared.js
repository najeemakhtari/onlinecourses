"use strict";

import { getMe } from "./func/auth.js";

window.addEventListener("load", () => {
  getMe().then((res) => {
    if (res.name) {
      document.querySelector(".app-header__login").style.display = "none";
      document.querySelector(".user-panel-btn").style.display = "flex";
    }
  });
});

const getAndShowAllCourses = async () => {
  const coursesContainer = document.querySelector("#all-courses");

  const res = await fetch(`http://localhost:4000/v1/courses`);

  const data = await res.json();

  data.slice(0, 8).map((data) => {
    coursesContainer.insertAdjacentHTML(
      "beforeend",
      `
    <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3">
    <div class="card-wrapper">
      <a href="#" class="card__img-link">
        <div class="card__img-wrapper">
          <span class="card__off-percentage">50%</span>
          <img
            src="images/courses/bootstrap.webp"
            class="card__img"
            alt="courses content"
          />
        </div>
      </a>
      <div class="cart__content">
        <div class="cart__labels">
          <span class="cart__label">Frontend</span>
        </div>
        <a href="#" class="cart__title-link">
          <h5 class="cart__title">
          ${data.name}
          </h5>
        </a>
        <p class="cart__text">
         ${data.description}
        </p>
        <div class="cart__detail">
          <div class="cart__detail-left">
            <div class="cart__teacher">
              <svg
                class="cart__teacher-icon"
                fill="#64748b"
                height="15px"
                width="15px"
                version="1.1"
                id="Layer_1"
                viewBox="0 0 299.97 299.97"
                xml:space="preserve"
              >
                <g id="SVGRepo_bgCarrier" stroke-width="0" />

                <g
                  id="SVGRepo_tracerCarrier"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />

                <g id="SVGRepo_iconCarrier">
                  <g>
                    <g>
                      <g>
                        <path
                          d="M149.985,126.898c34.986,0,63.449-28.463,63.449-63.449C213.435,28.463,184.971,0,149.985,0S86.536,28.463,86.536,63.449 C86.536,98.436,114.999,126.898,149.985,126.898z M149.985,15.15c26.633,0,48.299,21.667,48.299,48.299 s-21.667,48.299-48.299,48.299s-48.299-21.667-48.299-48.299S123.353,15.15,149.985,15.15z"
                        />
                        <path
                          d="M255.957,271.919l-20.807-86.313c-2.469-10.244-11.553-17.399-22.093-17.399c-13.216,0-114.332,0-126.145,0 c-10.538,0-19.623,7.155-22.093,17.399l-20.807,86.313c-3.444,14.289,7.377,28.051,22.093,28.051h167.76 C248.563,299.97,259.407,286.229,255.957,271.919z M66.105,284.82c-4.898,0-8.513-4.581-7.364-9.35l20.807-86.314 c0.823-3.415,3.851-5.799,7.365-5.799H121.4l-9.553,67.577c-0.283,2,0.244,4.029,1.464,5.637l21.422,28.249H66.105z M127.291,249.932l9.411-66.574h26.567l9.411,66.574l-22.695,29.927L127.291,249.932z M233.865,284.82h-68.628l21.421-28.248 c1.22-1.609,1.747-3.638,1.464-5.637l-9.553-67.577h34.487c3.513,0,6.542,2.385,7.365,5.8l20.807,86.313 C242.377,280.235,238.769,284.82,233.865,284.82z"
                        />
                      </g>
                    </g>
                  </g>
                </g>
              </svg>
              <div>${data.creator}</div>
            </div>
            <div class="cart__time">
              <svg
                class="cart__time-icon"
                width="15px"
                height="15px"
                viewBox="0 0 24 24"
                fill="none"
              >
                <g id="SVGRepo_bgCarrier" stroke-width="0" />

                <g
                  id="SVGRepo_tracerCarrier"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />

                <g id="SVGRepo_iconCarrier">
                  <circle
                    cx="12"
                    cy="12"
                    r="8.5"
                    stroke="#64748b"
                  />
                  <path
                    d="M16.5 12H12.25C12.1119 12 12 11.8881 12 11.75V8.5"
                    stroke="#64748b"
                    stroke-linecap="round"
                  />
                </g>
              </svg>
              <div>01:37</div>
            </div>
          </div>
          <div class="cart__detail-right">
            <div class="cart__rate">
              <svg
                version="1.0"
                id="Layer_1"
                width="15px"
                height="15px"
                viewBox="0 0 64 64"
                enable-background="new 0 0 64 64"
                xml:space="preserve"
                fill="#000000"
              >
                <g id="SVGRepo_bgCarrier" stroke-width="0" />

                <g
                  id="SVGRepo_tracerCarrier"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />

                <g id="SVGRepo_iconCarrier">
                  <path
                    fill="#FFD908"
                    d="M63.893,24.277c-0.238-0.711-0.854-1.229-1.595-1.343l-19.674-3.006L33.809,1.15 C33.479,0.448,32.773,0,31.998,0s-1.48,0.448-1.811,1.15l-8.815,18.778L1.698,22.935c-0.741,0.113-1.356,0.632-1.595,1.343 c-0.238,0.71-0.059,1.494,0.465,2.031l14.294,14.657L11.484,61.67c-0.124,0.756,0.195,1.517,0.822,1.957 c0.344,0.243,0.747,0.366,1.151,0.366c0.332,0,0.666-0.084,0.968-0.25l17.572-9.719l17.572,9.719c0.302,0.166,0.636,0.25,0.968,0.25 c0.404,0,0.808-0.123,1.151-0.366c0.627-0.44,0.946-1.201,0.822-1.957l-3.378-20.704l14.294-14.657 C63.951,25.771,64.131,24.987,63.893,24.277z"
                  />
                </g>
              </svg>
              <div>${data.courseAverageScore}</div>
            </div>
          </div>
        </div>
        <div class="cart__footer">
          <div class="cart__student">
            <span class="cart__student-counter">
              <svg
                width="20px"
                height="20px"
                viewBox="0 0 24 24"
                fill="none"
                stroke="#64748b"
              >
                <g id="SVGRepo_bgCarrier" stroke-width="0" />

                <g
                  id="SVGRepo_tracerCarrier"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />

                <g id="SVGRepo_iconCarrier">
                  <path
                    d="M10.1992 12C12.9606 12 15.1992 9.76142 15.1992 7C15.1992 4.23858 12.9606 2 10.1992 2C7.43779 2 5.19922 4.23858 5.19922 7C5.19922 9.76142 7.43779 12 10.1992 12Z"
                    stroke="#64748b"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M1 22C1.57038 20.0332 2.74795 18.2971 4.36438 17.0399C5.98081 15.7827 7.95335 15.0687 10 15C14.12 15 17.63 17.91 19 22"
                    stroke="#64748b"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M17.8205 4.44006C18.5822 4.83059 19.1986 5.45518 19.579 6.22205C19.9594 6.98891 20.0838 7.85753 19.9338 8.70032C19.7838 9.5431 19.3674 10.3155 18.7458 10.9041C18.1243 11.4926 17.3302 11.8662 16.4805 11.97"
                    stroke="#64748b"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M17.3203 14.5701C18.6543 14.91 19.8779 15.5883 20.8729 16.5396C21.868 17.4908 22.6007 18.6827 23.0003 20"
                    stroke="#64748b"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </g>
              </svg>
            </span>
            <div class="cart__student-number">${data.registers}</div>
          </div>
          <div class="cart__price">
         
            <span class="cart__off-price-label">120</span>
            <span class="cart__course-price">
              ${data.price}
              <span class="cart__course-price-currency"
                >$</span
              ></span
            >
          </div>
        </div>
      </div>
    </div>
  </div>



    `
    );
  });
};

const getAndShowArticles = async () => {
  const articles = document.querySelector("#articles");

  const getArticle = await fetch(`http://localhost:4000/v1/articles`);

  const allArticles = await getArticle.json();

  allArticles.slice(0, 4).map((article) => {
    articles.insertAdjacentHTML(
      "beforeend",
      `
    <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3">
                <div class="blog__card">
                  <div class="blog__card-img-wrapper">
                    <div class="blog__card-img-cover"></div>
                    <img
                      src="images/blog/javascript.webp"
                      alt="javascript"
                      class="blog__card-img"
                    />
                  </div>
                  <div class="blog__content">
                    <h4 class="blog__title">
                      ${article.title}
                    </h4>
                    <p class="blog__text">
                      ${article.description}
                    </p>

                    <div class="blog__detail">
                      <svg
                        width="20px"
                        height="20px"
                        viewBox="0 0 24 24"
                        fill="none"
                      >
                        <g id="SVGRepo_bgCarrier" stroke-width="0" />

                        <g
                          id="SVGRepo_tracerCarrier"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        />

                        <g id="SVGRepo_iconCarrier">
                          <circle
                            cx="12"
                            cy="6"
                            r="4"
                            stroke="#64748b"
                            stroke-width="1.5"
                          />
                          <path
                            d="M19.9975 18C20 17.8358 20 17.669 20 17.5C20 15.0147 16.4183 13 12 13C7.58172 13 4 15.0147 4 17.5C4 19.9853 4 22 12 22C14.231 22 15.8398 21.8433 17 21.5634"
                            stroke="#64748b"
                            stroke-width="1.5"
                            stroke-linecap="round"
                          />
                        </g>
                      </svg>
                      <span class="blog__writer">${article.creator.name}</span>
                      <svg
                        fill="#64748b"
                        height="15px"
                        width="15px"
                        version="1.1"
                        id="Capa_1"
                        viewBox="0 0 512 512"
                        xml:space="preserve"
                        stroke="#64748b"
                      >
                        <g id="SVGRepo_bgCarrier" stroke-width="0" />

                        <g
                          id="SVGRepo_tracerCarrier"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        />

                        <g id="SVGRepo_iconCarrier">
                          <g>
                            <path
                              d="M472,60h-8V44c0-13.234-10.766-24-24-24s-24,10.766-24,24v16H96V44c0-13.234-10.766-24-24-24S48,30.766,48,44v16h-8 C17.944,60,0,77.944,0,100v352c0,22.056,17.944,40,40,40h432c22.056,0,40-17.944,40-40V100C512,77.944,494.056,60,472,60z M432,44 c0-4.411,3.589-8,8-8s8,3.589,8,8v23.981c0,0.007-0.001,0.013-0.001,0.019S448,68.013,448,68.019V92c0,4.411-3.589,8-8,8 s-8-3.589-8-8V44z M72,36c4.411,0,8,3.589,8,8v48c0,4.411-3.589,8-8,8s-8-3.589-8-8V68.01c0-0.003,0-0.007,0-0.01s0-0.006,0-0.01 V44C64,39.589,67.589,36,72,36z M472,476H40c-13.234,0-24-10.766-24-24V148h384c4.418,0,8-3.582,8-8s-3.582-8-8-8H16v-32 c0-13.234,10.766-24,24-24h8v16c0,13.234,10.766,24,24,24s24-10.766,24-24V76h320v16c0,13.234,10.766,24,24,24s24-10.766,24-24V76 h8c13.234,0,24,10.766,24,24v32h-16c-4.418,0-8,3.582-8,8s3.582,8,8,8h16v304C496,465.234,485.234,476,472,476z"
                            />
                            <path
                              d="M448,132h-16c-4.418,0-8,3.582-8,8s3.582,8,8,8h16c4.418,0,8-3.582,8-8S452.418,132,448,132z"
                            />
                            <path
                              d="M201.546,253.764l44.103-44.103c0.188-0.188,0.366-0.385,0.535-0.591c0.072-0.087,0.133-0.179,0.201-0.268 c0.09-0.119,0.182-0.236,0.265-0.361c0.074-0.11,0.138-0.225,0.206-0.338c0.066-0.11,0.135-0.218,0.196-0.332 c0.063-0.118,0.117-0.24,0.174-0.361c0.055-0.115,0.112-0.229,0.161-0.347s0.089-0.24,0.132-0.361 c0.045-0.125,0.093-0.25,0.132-0.378c0.037-0.122,0.064-0.245,0.095-0.368c0.033-0.13,0.069-0.258,0.095-0.391 c0.029-0.144,0.046-0.29,0.066-0.435c0.016-0.113,0.038-0.224,0.049-0.338c0.052-0.526,0.052-1.055,0-1.581 c-0.011-0.114-0.033-0.225-0.049-0.338c-0.021-0.145-0.038-0.291-0.066-0.435c-0.026-0.132-0.063-0.261-0.095-0.391 c-0.031-0.123-0.058-0.247-0.095-0.368c-0.039-0.128-0.087-0.252-0.132-0.378c-0.043-0.121-0.083-0.242-0.132-0.361 s-0.107-0.232-0.161-0.347c-0.057-0.121-0.111-0.243-0.174-0.361c-0.061-0.114-0.13-0.222-0.196-0.332 c-0.068-0.113-0.132-0.228-0.206-0.338c-0.083-0.124-0.175-0.241-0.265-0.361c-0.067-0.089-0.129-0.181-0.201-0.268 c-0.335-0.409-0.71-0.784-1.119-1.119c-0.084-0.069-0.172-0.128-0.258-0.193c-0.123-0.093-0.243-0.187-0.371-0.273 c-0.107-0.072-0.219-0.133-0.328-0.199c-0.114-0.068-0.225-0.14-0.343-0.203c-0.114-0.061-0.23-0.112-0.346-0.167 c-0.121-0.057-0.24-0.118-0.364-0.169c-0.112-0.046-0.226-0.083-0.339-0.124c-0.133-0.048-0.264-0.099-0.4-0.14 c-0.113-0.034-0.227-0.059-0.341-0.088c-0.139-0.035-0.276-0.074-0.418-0.102c-0.13-0.026-0.261-0.041-0.392-0.06 c-0.127-0.019-0.253-0.043-0.382-0.055c-0.232-0.023-0.465-0.033-0.698-0.035c-0.03,0-0.059-0.004-0.089-0.004H152 c-4.418,0-8,3.582-8,8s3.582,8,8,8h68.683l-42.343,42.343c-0.188,0.188-0.366,0.385-0.535,0.591 c-0.072,0.087-0.133,0.179-0.201,0.268c-0.09,0.119-0.182,0.236-0.265,0.361c-0.074,0.11-0.138,0.225-0.206,0.338 c-0.066,0.11-0.135,0.218-0.196,0.332c-0.063,0.118-0.116,0.239-0.173,0.359c-0.055,0.116-0.113,0.23-0.162,0.35 c-0.049,0.118-0.088,0.238-0.131,0.358c-0.045,0.126-0.094,0.251-0.133,0.38c-0.037,0.122-0.064,0.245-0.095,0.368 c-0.033,0.13-0.069,0.258-0.095,0.391c-0.029,0.144-0.046,0.29-0.066,0.435c-0.016,0.113-0.038,0.224-0.049,0.338 c-0.052,0.526-0.052,1.055,0,1.581c0.011,0.114,0.033,0.225,0.049,0.338c0.021,0.145,0.038,0.291,0.066,0.435 c0.026,0.132,0.063,0.261,0.095,0.391c0.031,0.123,0.058,0.247,0.095,0.368c0.039,0.129,0.088,0.254,0.133,0.38 c0.043,0.12,0.082,0.24,0.131,0.358c0.049,0.119,0.107,0.233,0.162,0.35c0.057,0.12,0.11,0.241,0.173,0.359 c0.061,0.114,0.13,0.222,0.196,0.332c0.068,0.113,0.132,0.228,0.206,0.338c0.083,0.124,0.175,0.241,0.265,0.361 c0.067,0.089,0.129,0.181,0.201,0.268c0.335,0.409,0.71,0.784,1.119,1.119c0.084,0.069,0.172,0.128,0.258,0.193 c0.123,0.093,0.243,0.187,0.371,0.273c0.108,0.072,0.22,0.134,0.33,0.2c0.113,0.068,0.224,0.139,0.341,0.201 c0.115,0.062,0.234,0.114,0.351,0.169c0.119,0.056,0.236,0.115,0.358,0.166c0.115,0.047,0.232,0.085,0.348,0.127 c0.13,0.047,0.258,0.097,0.391,0.137c0.117,0.035,0.236,0.061,0.354,0.091c0.134,0.034,0.267,0.072,0.404,0.099 c0.139,0.028,0.279,0.044,0.419,0.064c0.118,0.017,0.234,0.04,0.354,0.051c0.262,0.026,0.526,0.04,0.789,0.04 c39.701,0,72,32.299,72,72s-32.299,72-72,72c-18.959,0-36.856-7.307-50.394-20.575c-3.155-3.093-8.221-3.042-11.313,0.114 c-3.093,3.155-3.042,8.22,0.114,11.313c16.546,16.217,38.42,25.148,61.593,25.148c48.523,0,88-39.477,88-88 C271.993,297.489,241.688,261.922,201.546,253.764z"
                            />
                            <path
                              d="M351.96,203.213c-0.011-0.114-0.033-0.225-0.049-0.338c-0.021-0.145-0.038-0.291-0.066-0.435 c-0.026-0.132-0.063-0.261-0.095-0.391c-0.031-0.123-0.058-0.247-0.095-0.368c-0.039-0.128-0.087-0.252-0.132-0.378 c-0.043-0.121-0.083-0.242-0.132-0.361s-0.107-0.232-0.161-0.347c-0.057-0.121-0.111-0.243-0.174-0.361 c-0.061-0.114-0.13-0.222-0.196-0.332c-0.068-0.113-0.132-0.228-0.206-0.338c-0.083-0.124-0.175-0.241-0.265-0.361 c-0.067-0.089-0.129-0.181-0.201-0.268c-0.335-0.409-0.71-0.784-1.119-1.119c-0.084-0.069-0.172-0.128-0.258-0.193 c-0.123-0.093-0.243-0.187-0.371-0.273c-0.107-0.072-0.219-0.133-0.328-0.199c-0.114-0.068-0.225-0.14-0.343-0.203 c-0.114-0.061-0.23-0.112-0.346-0.167c-0.121-0.057-0.24-0.118-0.364-0.169c-0.112-0.046-0.226-0.083-0.339-0.124 c-0.133-0.048-0.264-0.099-0.4-0.14c-0.113-0.034-0.227-0.059-0.341-0.088c-0.139-0.035-0.276-0.074-0.418-0.102 c-0.13-0.026-0.261-0.041-0.392-0.06c-0.127-0.019-0.253-0.043-0.382-0.055c-0.232-0.023-0.465-0.033-0.698-0.035 c-0.03,0-0.059-0.004-0.089-0.004s-0.059,0.004-0.089,0.004c-0.233,0.003-0.466,0.012-0.698,0.035 c-0.129,0.012-0.255,0.036-0.382,0.055c-0.131,0.019-0.262,0.034-0.392,0.06c-0.141,0.028-0.279,0.066-0.418,0.102 c-0.114,0.029-0.228,0.054-0.341,0.088c-0.136,0.041-0.267,0.092-0.4,0.14c-0.113,0.041-0.228,0.078-0.339,0.124 c-0.124,0.051-0.243,0.112-0.364,0.169c-0.116,0.055-0.232,0.106-0.346,0.167c-0.117,0.063-0.229,0.134-0.343,0.203 c-0.11,0.066-0.221,0.128-0.328,0.199c-0.128,0.086-0.249,0.18-0.371,0.273c-0.086,0.065-0.174,0.124-0.258,0.193 c-0.206,0.169-0.404,0.347-0.592,0.535l-39.996,39.996c-3.125,3.124-3.125,8.189,0,11.313c1.562,1.562,3.609,2.343,5.657,2.343 s4.095-0.781,5.657-2.343L336,223.317v196.687c0,4.418,3.582,8,8,8s8-3.582,8-8V204.006 C352,203.741,351.986,203.477,351.96,203.213z"
                            />
                          </g>
                        </g>
                      </svg>
                      <span class="blog__date">2024/12/01</span>
                    </div>
                    <div class="blog__footer">
                      <a href="#" class="blog__footer-title"> Read Post </a>
                      <svg
                        class="blog__footer-svg"
                        width="16px"
                        height="16px"
                        viewBox="0 0 32 32"
                        version="1.1"
                        fill="#64748b"
                      >
                        <g id="SVGRepo_bgCarrier" stroke-width="0" />

                        <g
                          id="SVGRepo_tracerCarrier"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        />

                        <g id="SVGRepo_iconCarrier">
                          <title>arrow-right-circle</title>
                          <desc>Created with Sketch Beta.</desc>
                          <defs></defs>
                          <g
                            id="Page-1"
                            stroke="none"
                            stroke-width="1"
                            fill="none"
                            fill-rule="evenodd"
                            sketch:type="MSPage"
                          >
                            <g
                              id="Icon-Set-Filled"
                              sketch:type="MSLayerGroup"
                              transform="translate(-310.000000, -1089.000000)"
                              fill="#64748b"
                            >
                              <path
                                d="M332.535,1105.88 L326.879,1111.54 C326.488,1111.93 325.855,1111.93 325.465,1111.54 C325.074,1111.15 325.074,1110.51 325.465,1110.12 L329.586,1106 L319,1106 C318.447,1106 318,1105.55 318,1105 C318,1104.45 318.447,1104 319,1104 L329.586,1104 L325.465,1099.88 C325.074,1099.49 325.074,1098.86 325.465,1098.46 C325.855,1098.07 326.488,1098.07 326.879,1098.46 L332.535,1104.12 C332.775,1104.36 332.85,1104.69 332.795,1105 C332.85,1105.31 332.775,1105.64 332.535,1105.88 L332.535,1105.88 Z M326,1089 C317.163,1089 310,1096.16 310,1105 C310,1113.84 317.163,1121 326,1121 C334.837,1121 342,1113.84 342,1105 C342,1096.16 334.837,1089 326,1089 L326,1089 Z"
                                id="arrow-right-circle"
                                sketch:type="MSShapeGroup"
                              ></path>
                            </g>
                          </g>
                        </g>
                      </svg>
                    </div>
                  </div>
                </div>
              </div>
    `
    );
  });
};

export { getAndShowAllCourses, getAndShowArticles };
